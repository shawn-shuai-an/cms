# CMS内容管理系统需求文档

## 1. 项目概述

### 1.1 项目背景
开发一个功能完善的内容管理系统(CMS)，支持管理员通过后台管理界面动态配置网站内容，并自动生成对应的前台用户页面，同时支持中英文双语切换功能。

### 1.2 项目目标
- 提供直观易用的管理后台界面
- 支持动态菜单配置和页面内容管理
- 实现中英文国际化支持
- 生成响应式、用户友好的前台页面
- 确保系统的可扩展性和maintainability

## 2. 功能需求

### 2.1 管理后台功能

#### 2.1.1 用户管理
- **管理员登录/登出**
  - 支持用户名/密码登录
  - 会话管理和安全认证
  - 权限控制和角色管理

#### 2.1.2 菜单管理
- **菜单结构配置**
  - 支持多级菜单创建（最多3级）
  - 菜单排序和层级调整
  - 菜单显示/隐藏控制
  
- **国际化菜单配置**
  - 中文菜单名称配置
  - 英文菜单名称配置
  - 菜单URL路径配置
  - 菜单图标选择（可选）

#### 2.1.3 页面内容管理
- **页面基本信息**
  - 页面标题（中英文）
  - 页面描述（中英文）
  - SEO关键词配置
  - 页面状态（发布/草稿）

- **内容编辑器**
  - 富文本编辑器支持
  - 图片上传和管理
  - 视频/音频媒体支持
  - 代码片段插入
  - 表格和列表支持

- **页面模板**
  - 预设页面模板选择
  - 自定义页面布局
  - 组件化内容块

#### 2.1.4 媒体管理
- **文件上传**
  - 图片文件上传（jpg, png, gif, webp）
  - 文档文件上传（pdf, doc, docx）
  - 音视频文件上传
  - 文件大小和格式限制

- **媒体库管理**
  - 文件分类和标签
  - 文件搜索和筛选
  - 文件预览功能
  - 存储空间统计

#### 2.1.5 网站设置
- **基本设置**
  - 网站名称（中英文）
  - 网站Logo上传
  - 联系信息配置
  - 社交媒体链接

- **国际化设置**
  - 默认语言设置
  - 语言切换方式配置
  - 时区和日期格式

### 2.2 前台用户功能

#### 2.2.1 页面展示
- **响应式设计**
  - 支持PC端、平板、手机端适配
  - 流畅的用户体验
  - 快速加载速度

- **动态菜单**
  - 根据后台配置自动生成导航菜单
  - 面包屑导航
  - 菜单高亮显示当前页面

#### 2.2.2 国际化支持
- **语言切换**
  - 中英文切换按钮
  - 语言选择记住用户偏好
  - URL路径国际化（可选）

- **内容本地化**
  - 菜单文字本地化
  - 页面内容本地化
  - 日期时间格式本地化

#### 2.2.3 SEO优化
- **搜索引擎优化**
  - 动态meta标签生成
  - 结构化数据支持
  - 网站地图自动生成
  - 友好的URL结构

## 3. 技术架构

### 3.1 前端技术栈
- **管理后台**: React + TypeScript + Ant Design
- **前台页面**: Next.js + TypeScript + Tailwind CSS
- **状态管理**: Zustand 或 Redux Toolkit
- **国际化**: react-i18next
- **编辑器**: TinyMCE 或 CKEditor

### 3.2 后端技术栈
- **框架**: Node.js + Express 或 Next.js API Routes
- **数据库**: MySQL
- **文件存储**: 本地存储
- **身份认证**: JWT
- **图片处理**: Sharp

### 3.3 数据库设计

#### 3.3.1 用户表 (users)
```sql
- id (主键)
- username (用户名)
- password (密码哈希)
- email (邮箱)
- role (角色: admin/editor)
- created_at (创建时间)
- updated_at (更新时间)
```

#### 3.3.2 菜单表 (menus)
```sql
- id (主键)
- parent_id (父级菜单ID)
- name_zh (中文名称)
- name_en (英文名称)
- url (链接地址)
- icon (图标)
- sort_order (排序)
- is_visible (是否显示)
- created_at (创建时间)
- updated_at (更新时间)
```

#### 3.3.3 页面表 (pages)
```sql
- id (主键)
- menu_id (关联菜单ID)
- title_zh (中文标题)
- title_en (英文标题)
- content_zh (中文内容)
- content_en (英文内容)
- meta_description_zh (中文描述)
- meta_description_en (英文描述)
- meta_keywords (关键词)
- status (状态: published/draft)
- template (模板类型)
- created_at (创建时间)
- updated_at (更新时间)
```

#### 3.3.4 媒体表 (media)
```sql
- id (主键)
- filename (文件名)
- original_name (原始文件名)
- file_path (文件路径)
- file_size (文件大小)
- mime_type (MIME类型)
- alt_text (替代文本)
- created_at (创建时间)
```

#### 3.3.5 网站设置表 (settings)
```sql
- id (主键)
- key (设置键)
- value (设置值)
- type (数据类型)
- group (设置分组)
- created_at (创建时间)
- updated_at (更新时间)
```

## 4. 功能模块详细设计

### 4.1 管理后台模块

#### 4.1.1 登录模块
- 登录页面设计
- 身份验证逻辑
- 权限控制中间件
- 会话管理

#### 4.1.2 仪表板模块
- 系统概览统计
- 最近操作记录
- 快捷操作入口
- 系统状态监控

#### 4.1.3 菜单管理模块
- 菜单树形结构展示
- 拖拽排序功能
- 菜单增删改查
- 批量操作功能

#### 4.1.4 页面管理模块
- 页面列表和筛选
- 可视化页面编辑器
- 页面预览功能
- 版本控制（可选）

#### 4.1.5 媒体管理模块
- 文件上传组件
- 媒体库浏览器
- 图片编辑工具
- 批量操作功能

### 4.2 前台展示模块

#### 4.2.1 布局组件
- 头部导航组件
- 底部信息组件
- 侧边栏组件
- 面包屑组件

#### 4.2.2 页面组件
- 首页组件
- 详情页组件
- 列表页组件
- 搜索页组件

#### 4.2.3 国际化组件
- 语言切换器
- 本地化内容渲染
- 日期时间格式化

## 5. 开发计划

### 5.1 第一阶段 (基础架构)
- [ ] 项目初始化和环境配置
- [ ] 数据库设计和建表
- [ ] 基本身份认证系统
- [ ] 管理后台基础框架

### 5.2 第二阶段 (核心功能)
- [ ] 菜单管理功能
- [ ] 页面内容管理
- [ ] 媒体文件管理
- [ ] 前台页面生成

### 5.3 第三阶段 (国际化)
- [ ] 中英文切换功能
- [ ] 内容本地化支持
- [ ] 国际化配置管理

### 5.4 第四阶段 (优化完善)
- [ ] SEO优化功能
- [ ] 性能优化
- [ ] 安全加固
- [ ] 测试和部署

## 6. 技术要求

### 6.1 性能要求
- 页面加载时间 < 3秒
- 管理后台响应时间 < 1秒
- 支持并发用户数 > 1000

### 6.2 安全要求
- 输入数据验证和清理
- SQL注入防护
- XSS攻击防护
- CSRF令牌验证
- 文件上传安全检查

### 6.3 兼容性要求
- 浏览器支持: Chrome 70+, Firefox 65+, Safari 12+, Edge 79+
- 移动端兼容: iOS 12+, Android 8+
- 响应式设计支持

## 7. 部署和运维

### 7.1 部署方案
- Docker容器化部署
- Nginx反向代理
- PM2进程管理
- 数据库备份策略

### 7.2 监控和日志
- 应用性能监控
- 错误日志记录
- 用户行为统计
- 系统资源监控

## 8. 后续扩展

### 8.1 可扩展功能
- 多站点管理
- 工作流审批
- 评论系统
- 搜索功能
- 缓存系统
- CDN集成

### 8.2 集成方案
- 第三方登录集成
- 支付系统集成
- 邮件服务集成
- 云存储集成

---

**文档版本**: v1.0  
**创建日期**: 2024年  
**更新日期**: 2024年 